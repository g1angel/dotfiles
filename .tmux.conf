# File: .tmux.conf
# Author: Josiah Gordon
# Last Modified: November 20, 2012
# License:  The MIT License {{{
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.
# }}}

# Set the prefix to C-Space. {{{
unbind-key C-b
set -g prefix C-Space
bind-key Space send-prefix
# }}}

# Keybindings. {{{
# Source the tmux.conf {{{
unbind-key r
bind-key r source-file $HOME/.tmux.conf
# }}}

# Lock keybindings {{{
# Lock server {{{
unbind-key C-x
bind-key C-x lock-server
# }}}

# Lock session {{{
unbind-key x
bind-key x lock-session
# }}}

# Lock client {{{
unbind-key X
bind-key X lock-client
# }}}
# }}}

# Copy and paste keybinding {{{
# Setup copy and paste mode {{{
unbind-key [
bind-key [ copy-mode
bind-key C-[ copy-mode

unbind-key ]
bind-key ] paste-buffer -s \015
bind-key C-] paste-buffer -s \015
# }}}

# Enable copy and paste of X clipboard {{{
unbind-key C-v
unbind-key C-y

# Reference: http://unix.stackexchange.com/questions/15715/getting-tmux-to-copy-a-buffer-to-the-clipboard
# move x clipboard into tmux paste buffer
bind-key C-v run "xclip -o -sel clipboard | tmux load-buffer -; tmux paste-buffer -s "
# move tmux copy buffer into x clipboard
bind-key C-y run "tmux show-buffer | xclip -i -sel clipboard"
# }}}
# }}}

# Refresh client {{{
unbind-key l
bind-key l refresh-client
# }}}

# Detach keybinding {{{
unbind-key C-d
bind-key C-d detach
# }}}

# Kill keybindings {{{
# Kill server {{{
unbind-key '\'
bind-key \ confirm-before -p "kill-server #S? (y/n)" "kill-server"
# }}}

# Kill window {{{
unbind-key K
bind-key K confirm-before -p "kill-window #W? (y/n)" "kill-window"
# }}}

# Kill pane {{{
unbind-key k
bind-key k confirm-before -p "kill-pane #P? (y/n)" "kill-pane"
# }}}
# }}}

# Rename keybindings {{{
# Rename window {{{
unbind-key A
bind-key A command-prompt "rename-window %%"
# }}}

# Rename session {{{
unbind-key a
bind-key a command-prompt "rename-session %%"
# }}}
# }}}

# List keybindings {{{
# List windows {{{
unbind-key C-w
bind-key C-w list-windows -a
unbind-key w
bind-key w list-windows
# }}}

# List sessions {{{
unbind-key S
bind-key S list-sessions
# }}}

# List clients {{{
unbind-key *
bind-key * list-clients
# }}}
# }}}

# Link/Un-link/Move window keybindings {{{
# Link window {{{
unbind-key +
bind-key + command-prompt -p "link-window source:","link-window target" "link-window -s %1 -t %2"
# }}}

# Un-Link window {{{
unbind-key _
bind-key _ command-prompt -p "unlink-window target:" "unlink-window -t %%"
# }}}

# Move window {{{
unbind-key m
bind-key m command-prompt -p "move-window source:","move-window target:" "move-window -s %1 -t %2"
# }}}
# }}}

# Switch window/pane keybindings {{{

# Next and previous window {{{
unbind-key C-n
bind-key C-n next-window
unbind-key n
bind-key n next-window
unbind-key C-p
bind-key C-p previous-window
unbind-key p
bind-key p previous-window
# }}}

# Choose window {{{
unbind-key '"'
bind-key '"' choose-window
# }}}

# Last window {{{
unbind-key C-Space
bind-key C-Space last-window
# }}}

# Select keybindings {{{
# Select window keybindings {{{
bind-key 0 select-window -t 0
bind-key 1 select-window -t 1
bind-key 2 select-window -t 2
bind-key 3 select-window -t 3
bind-key 4 select-window -t 4
bind-key 5 select-window -t 5
bind-key 6 select-window -t 6
bind-key 7 select-window -t 7
bind-key 8 select-window -t 8
bind-key 9 select-window -t 9
# }}}

# Select pane keybindings {{{
bind-key -r C-j select-pane -D
bind-key -r C-k select-pane -U
bind-key -r C-h select-pane -L
bind-key -r C-l select-pane -R
# }}}
# }}}

# }}}

# Create new window keybinding {{{
unbind-key C-c
bind-key C-c new-window
unbind-key c
bind-key c new-window
# }}}

# Split window keybindings {{{
# Virtical split {{{
unbind-key |
bind-key | split-window
# }}}

# Horizontal plit {{{
unbind-key %
bind-key % split-window -h
# }}}
# }}}

# Resize pane keybindings {{{
bind-key -r M-h resize-pane -L
bind-key -r M-l resize-pane -R
bind-key -r M-j resize-pane -D
bind-key -r M-k resize-pane -U
# }}}

# Break/Join pane keybindings {{{
# Break-pane {{{
unbind-key !
bind-key ! break-pane
# }}}

# Join-pane {{{
unbind-key @
bind-key @ command-prompt -p "join-pane source:","join-pane target:" "join-pane -h -s %1 -t %2"
# }}}
# }}}
# }}}

# Options {{{
# Misc {{{
# Enable mouse scrolling.
set-option -g mode-mouse on

# Allow multiple commands without having to repress the prefix-key.
set-option -g repeat-time 500

# Set the lock command.
set-option -g lock-command vlock

# Use vi keybindings.
set-window-option -g mode-keys vi

# Allow the mouse to select panes
set-option -g mouse-select-pane on

# Set the history scrollback to 5120
set-option -g history-limit 5120

# Set the TERM to screen-bce
set-option -g default-terminal screen-bce

# Always use utf-8
set-window-option -g utf8 on

# Make tmux update the LC_CTYPE environment variable.
set-option -g update-environment "DISPLAY SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION WINDOWID LC_CTYPE DBUS_SESSION_BUS_ADDRESS"
# }}}

# Colors {{{

# Pane colors {{{
set-option -g pane-border-fg default
set-option -g pane-active-border-fg blue
# }}}

# Status bar colors {{{
set-option -g status-attr bright
set-option -g status-bg brightblack
set-option -g status-fg white
set-option -g status-right-attr bright
set-option -g status-right-bg brightblack
set-option -g status-right-fg brightgreen
set-option -g mode-fg black
set-window-option -g window-status-current-attr bright
set-window-option -g window-status-current-bg brightgreen
set-window-option -g window-status-current-fg black
# }}}
# }}}

# Status {{{
# Setup what the status bar will display.
set-option -g status-right '%a %b %d %Y %T'
set-option -g status-right-length 80

# Update the status line every second so the clock will update.
set-option -g status-interval 1

# Use emacs keybindings at the command line.
set-option -g status-keys emacs

# Enable utf-8 in status line.
set-option -g status-utf8 on
# }}}
# }}}

# vim: ft=tmux:fdm=marker:fdl=0:fmr={{{,}}}
